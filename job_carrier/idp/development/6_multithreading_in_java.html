<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Многопоточность в Java (Java Multithreading)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_многопоточность_в_java_java_multithreading">Многопоточность в Java (Java Multithreading)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Основу работы с потока в Java составляют интерфейс Runnable (@FunctionalInterface public interface Runnable) и класс Thread (public class Thread extends Object implements Runnable).</p>
</div>
<div class="paragraph">
<p>Изначально программа состоит из главного потока - Main Thread. Главный поток запускает метод main().
По ходу выполнения программы могут быть запущены дочерние потоки.
Программа (написанная на Java) завершится, как только завершится последний её поток не являющийся демоном (метод main() при этом может быть уже давным-давно завершен).</p>
</div>
<div class="sect2">
<h3 id="_способы_создания_и_запуска_нового_потока_в_java">Способы создания и запуска нового потока в Java</h3>
<div class="ulist">
<ul>
<li>
<p>Реализовать интерфейс Runnable</p>
</li>
<li>
<p>Унаследовать класс Thread</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В обоих случаях понадобится переопределить метод void run().
Runnable – функциональный интерфейс, что позволяет использовать лямбда выражение.
В Java экземпляры класса Thread.class могут объединяться в группы (ThreadGroup.class) для формирования структуры и иерархии.</p>
</div>
</div>
<div class="sect2">
<h3 id="_особенности_выбора">Особенности выбора</h3>
<div class="ulist">
<ul>
<li>
<p>Наследование класса Thread целесообразно применять когда нужно дополнить функциональность самого класса Thread.</p>
</li>
<li>
<p>Использование интерфейса Runnable – когда просто нужно одновременно выполнить несколько задач и не требуется вносить изменений в сам механизм многопоточности.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_особенности_java_multithreading">Особенности Java Multithreading</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_особенности_запуска_потоков">Особенности запуска потоков</h3>
<div class="ulist">
<ul>
<li>
<p>Для запуска НОВЫХ потоков нужно вызывать метод start(), а не run().</p>
</li>
<li>
<p>Метод start() заставляет этот поток начать выполнение.</p>
</li>
<li>
<p>Виртуальная машина Java сама вызывает метод запуска run() этого потока.</p>
</li>
<li>
<p>Прямой вызов метода run() не имеет отношения к многопоточности – в этом случае программа будет выполнена в главном потоке Main Thread.</p>
</li>
<li>
<p>В каком порядке запускать новые потоки решает Планировщик потоков – часть JVM, которая решает какой поток должен выполнится в каждый конкретный момент времени и какой поток нужно приостановить.</p>
</li>
<li>
<p>Если поток был запущен и завершился – повторно запустить его не получится.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_особенности_выполнения_потоков">Особенности выполнения потоков</h3>
<div class="ulist">
<ul>
<li>
<p>Последовательность выполнения потоков контролировать нельзя.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_особенности_остановки_потоков">Особенности остановки потоков</h3>
<div class="ulist">
<ul>
<li>
<p>Поток нельзя остановить – он может остановиться только сам. Но можно явно указать, что потоку следует остановиться.</p>
</li>
<li>
<p>Класс Thread содержит скрытое булево поле – флаг прерывания. Установить флаг можно вызвав метод потока interrupt(). Это укажет, что поток следует прервать, но не прервет его тут же.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_особенности_завершения_потоков">Особенности завершения потоков</h3>
<div class="ulist">
<ul>
<li>
<p>Main Thread завершается вместе с выходом из метода main(), а Дочерний поток – завершая выполнение метода run().</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_особенности_жизненного_цикла_потоков">Особенности жизненного цикла потоков</h3>
<div class="paragraph">
<p>Существует 4 состояния жизненного цикла объекта:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Состояние New</p>
<div class="ulist">
<ul>
<li>
<p>Когда создается новый экземпляр объекта класса Thread, но метод start() не вызывался.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Состояние Runnable</p>
<div class="ulist">
<ul>
<li>
<p>Когда для созданного нового объекта Thread был вызван метод start(). Такой поток либо ожидает, что планировщик заберет его для выполнения, либо уже запущен.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Состояние Non-Runnable (Blocked , Timed-Waiting)</p>
<div class="ulist">
<ul>
<li>
<p>Когда поток временно неактивен, то есть объект класса Thread существует, но не выбран планировщиком для выполнения.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Состояние Terminated</p>
<div class="ulist">
<ul>
<li>
<p>Когда поток завершает выполнение своего метода run(), он переходит в состояние terminated (завершен). На этом этапе выполнение потока завершается.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_приоритет_потоков">Приоритет потоков</h3>
<div class="paragraph">
<p>Для контроля важности и очерёдности работы разных потоков существует приоритет. Он является одним из ключевых факторов выбора системой потока для выполнения.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Приоритет может иметь числовое значение от 1 до 10.</p>
</li>
<li>
<p>По умолчанию главному потоку выставляется средний приоритет – 5</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_переключение_потоков">Переключение потоков</h3>
<div class="sect3">
<h4 id="_присоединение_к_потоку">Присоединение к потоку</h4>
<div class="paragraph">
<p>Метод - join().
Цель: Остановка заданного потока в пользу другого.
Суть: Свое выполнение начнёт выбранный поток. Выполнение текущего потока будет приостановлено.</p>
</div>
</div>
<div class="sect3">
<h4 id="_усыпление_потока">Усыпление потока</h4>
<div class="paragraph">
<p>Метод - sleep().
Цель метода – усыпить поток на некоторое время.
Суть: Часто используется в дочерних потоках, когда нужно делать какое-то действие постоянно, но не слишком часто. Поток в состоянии сна можно прервать.
После того как поток просыпается, он переходит в состояние runnable. Однако это не значит, что Планировщик потоков запустит сразу и именно его.</p>
</div>
</div>
<div class="sect3">
<h4 id="_пропуск_очередности_хода">Пропуск очередности (хода)</h4>
<div class="paragraph">
<p>Метод - Thread.yield() (аналог Thread.sleep())
Цель – усыпить поток на некоторое время.
Позволяет досрочно завершить квант времени текущего потока: переключает процессор на следующий поток.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ожидание_потока">Ожидание потока</h4>
<div class="paragraph">
<p>Метод - wait().
Суть: Выполняется метод wait на объекте, на мониторе которого мы хотим выполнить ожидание.</p>
</div>
</div>
<div class="sect3">
<h4 id="_парковка_потока">Парковка потока</h4>
<div class="paragraph">
<p>Метод - LockSupport.park() или ReentrantLock.lock() (Локи в Java построены так же на LockSupport)
Суть: Вызов метода park возвращается немедленно, если permit доступен, занимая этот самый permit в процессе вызова. Иначе он блокируется.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_daemon_потоки_фоновые_процессы">Daemon потоки. Фоновые процессы</h3>
<div class="paragraph">
<p>Для работы с Daemon потоками у класса Thread существуют методы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>setDaemon()</p>
</li>
<li>
<p>isDaemon()</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JVM прекращает работу, как только все не Daemon потоки завершаются.</p>
</div>
</div>
<div class="sect2">
<h3 id="_использование_памяти">Использование памяти</h3>
<div class="ulist">
<ul>
<li>
<p>Чем больше потоков создается – тем больше памяти используется.</p>
</li>
<li>
<p>Во многих системах может быть ограничение на количество потоков.</p>
</li>
<li>
<p>Даже если такого ограничения нет, в любом случае имеется естественное ограничение в виде максимальной скорости процессора.</p>
</li>
<li>
<p>Для каждого потока создается свой собственный стек в памяти. Туда помещаются все локальные переменные и ряд других данных, связанных с выполнением потока.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_синхронизация_потоков_в_java_synchronized">Синхронизация потоков в Java (Synchronized)</h3>
<div class="paragraph">
<p>Механизм синхронизации обеспечивает последовательный доступ к ресурсам. Выполнение программы не будет продолжено, пока заблокированный ресурс не освободится.
Для блокировки ресурса используется ключевое слово synchronized. Синхронизированным может быть как отдельный метод, так и блок кода.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Test</span> {
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">synchronized</span> <span style="color:#339;font-weight:bold">void</span> test() {}
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>final поля класса инициализируются в его конструкторе – соответственно значение final полей будет видно всем потокам без синхронизации.</p>
</li>
<li>
<p>static метод – в этом случае синхронизация будет осуществляться по классу, где этот метод объявлен.</p>
</li>
<li>
<p>Если у объекта один синхронизированный метод статический, а другой синхронизированный метод не статический – они могут одновременно выполняться т.к. монитор (блокировка) для первого – класс, а для второго – объект. (!)</p>
</li>
<li>
<p>Недостатком использования synchronized является вынужденное ожидание другими потоками освобождения нужного объекта или метода - bottle neck (узкое место).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_семафоры_monitor_mutex_semaphore">Семафоры (Monitor. Mutex. Semaphore)</h3>
<div class="sect3">
<h4 id="_семафор_semaphore">Семафор (Semaphore)</h4>
<div class="paragraph">
<p>Определение: Семафор — это средство синхронизации доступа к ресурсу для ограничения количество потоков, которые могут войти в заданный участок кода.
Свойство: Семафор использует СЧЁТЧИК потоков, который указывает, сколько потоков ОДНОВРЕМЕННО могут получать доступ к общему ресурсу.</p>
</div>
</div>
<div class="sect3">
<h4 id="_мьютекс_mutex">Мьютекс (Mutex)</h4>
<div class="paragraph">
<p>Определение: Мьютекс — поле для синхронизации потоков. Есть у каждого объекта в Java.
Свойство: Это простейший Семафор, который может находиться в одном из двух состояний: true или false.</p>
</div>
</div>
<div class="sect3">
<h4 id="_монитор_monitor">Монитор (Monitor)</h4>
<div class="paragraph">
<p>Определение: Монитор — это дополнительная надстройка над Мьютексом.
Свойство: Блокирует объект именно монитор.</p>
</div>
</div>
<div class="sect3">
<h4 id="_принципы_работы">Принципы работы</h4>
<div class="ulist">
<ul>
<li>
<p>Когда один поток заходит внутрь synchronized блока кода, JVM тут же блокирует Mьютекс синхронизированного объекта.</p>
</li>
<li>
<p>Больше ни один поток не сможет зайти в этот блок, пока текущий поток его не покинет.</p>
</li>
<li>
<p>Как только первый поток выйдет из блока synchronized, Mьютекс автоматически разблокируется и будет свободен для захвата следующим потоком.</p>
</li>
<li>
<p>Когда Mьютекс занят – новый поток будет ждать, пока он не освободится.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_модификатор_volatile">Модификатор volatile</h3>
<div class="sect3">
<h4 id="_предпосылки_возникновения">Предпосылки возникновения</h4>
<div class="paragraph">
<p>При взаимодействии с переменной каждый поток хранит ее значение в своем стеке.
Может возникнуть ситуация, что один поток изменит значение общей переменной, а второй поток будет продолжать работать с ее старым значением из своего кэша.
Также, в отличие от других примитивных типов данных, операции чтения и записи long и double не являются атомарными из-за их большого размера (64 бита).
Эти две проблемы решает модификатор volatile.
Ключевое слово volatile применимо к переменным. volatile в Java гарантирует, что значение переменной volatile всегда будет считываться из основной памяти, а не из локального кэша Thread.</p>
</div>
</div>
<div class="sect3">
<h4 id="_принцип_работы">Принцип работы</h4>
<div class="paragraph">
<p>Операции чтения и записи volatile переменной являются атомарными.
Переменная не будет помещаться в кэш: результат записи значения в volatile переменную одним потоком будет виден всем другим потокам, которые используют эту переменную для чтения.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Example</span> {
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">volatile</span> <span style="color:#339;font-weight:bold">long</span> x;
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">volatile</span> <span style="color:#339;font-weight:bold">double</span> y;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_интерфейс_callable">Интерфейс Callable</h3>
<div class="paragraph">
<p>Назначение: Получение результата работы потока (начиная с Java 5).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Callable очень похож на интерфейс Runnable, НО в отличие от Runnable объявляет метод call(), который возвращает результат работы потока.</p>
</li>
<li>
<p>Использует дженерики для указания типа возвращаемого объекта.</p>
</li>
<li>
<p>Кроме того метод call() бросает Exception.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Отличия:
* Runnable изначально был разработан для длительного параллельного выполнения.
* Callable предназначен для одноразовых задач, которые возвращают один результат.</p>
</div>
</div>
<div class="sect2">
<h3 id="_класс_completablefuture">Класс CompletableFuture</h3>
<div class="paragraph">
<p>Назначение: Класс CompletableFuture - новый класс из Java 8 для асинхронной работы.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Дает возможность комбинировать шаги обработки результата, соединяя их в цепочку.</p>
</li>
<li>
<p>Как и Future, использует дженерики для указания типа возвращаемого объекта.</p>
</li>
<li>
<p>Если значение возвращать не нужно, а нужно только провести промежуточную операцию над результатом – существуют методы thenRun() и thenAccept()</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_concurrency_неблокирующая_синхронизация">Concurrency. Неблокирующая синхронизация</h3>
<div class="sect3">
<h4 id="_предпосылки_возникновения_2">Предпосылки возникновения</h4>
<div class="paragraph">
<p>Когда обрабатывают крупный массив данных на многоядерном процессоре, обычные структуры данных можно оградить мьютексом только целиком, и если потоки постоянно к ним обращаются, работа становится почти что последовательной.
Неблокирующие алгоритмы гарантируют, что такие остановки одного из потоков не приведут к простою остальных.</p>
</div>
</div>
<div class="sect3">
<h4 id="_назначение">Назначение</h4>
<div class="paragraph">
<p>Неблокирующая синхронизация позволяет полностью избавиться от взаимных блокировок. Разделение доступа между потоками идёт за счёт атомарных операций и разработанных под конкретную задачу механизмов блокировки.</p>
</div>
<div class="paragraph">
<p>Пакет java.util.concurrent включает в себя несколько небольших стандартизированных расширяемых фреймворков, а также некоторые классы, которые обеспечивают полезную функциональность и в остальном утомительны или сложны в реализации.
Классы и интерфейсы пакета java.util.concurrent объединены в несколько групп по функциональному признаку:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Collections – набор более эффективно работающих в многопоточной среде коллекций нежели стандартные универсальные коллекции из java.util пакета</p>
</li>
<li>
<p>Synchronizers – объекты синхронизации, позволяющие управлять и/или ограничивать работу нескольких потоков.</p>
</li>
<li>
<p>Atomic – набор атомарных классов, позволяющих использовать принцип действия механизма оптимистической блокировки для выполнения атомарных операций.</p>
</li>
<li>
<p>Queues – объекты создания блокирующих и неблокирующих очередей с поддержкой многопоточности.</p>
</li>
<li>
<p>Locks – механизмы синхронизации потоков, альтернативы базовым synchronized, wait, notify, notifyAll</p>
</li>
<li>
<p>Executors – механизмы создания пулов потоков и планирования работы асинхронных задач</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_атомарные_классы_atomic">Атомарные классы. Atomic</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Операция называется атомарной, когда ее можно безопасно выполнить при параллельных вычислениях в нескольких потоках, не используя при этом блокировок.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Атомарные классы работают по принципу ОПТИМИСТИЧЕСКОГО ПОДХОДА</p>
</div>
<div class="sect3">
<h4 id="_пессимистический_подход">Пессимистический подход</h4>
<div class="paragraph">
<p>Суть в том, что разрешается ТОЛЬКО ОДНОМУ потоку выполнять определённый код, связанный с изменением значения некоторой общей переменной.
Так работает БЛОКИРОВКА.</p>
</div>
</div>
<div class="sect3">
<h4 id="_оптимистический_подход">Оптимистический подход</h4>
<div class="paragraph">
<p>Суть в том, что если поток обнаруживает, что значение переменной изменилось другим потоком, то он повторяет операцию снова, но уже с новым значением переменной.
В этом случае блокировки НЕ ПРОИСХОДИТ.
Так работают Атомарные классы.</p>
</div>
</div>
<div class="sect3">
<h4 id="_принципы_работы_2">Принципы работы</h4>
<div class="ulist">
<ul>
<li>
<p>Атомарная операция либо выполняется целиком, либо не выполняется вовсе.</p>
</li>
<li>
<p>Атомарные классы ГАРАНТИРУЕТ, что определенные операции будут выполняться ПОТОКОБЕЗОПАСНО  (например операции инкремента и декремента, обновления и добавления значения (add)).</p>
</li>
<li>
<p>Когда требуется примитивный тип, выполняющий операции инкремента и декремента, гораздо проще выбрать его среди атомарных классов в пакете java.util.concurrent.atomic, чем писать synchronized блок самому.</p>
</li>
<li>
<p>Внутри атомарные классы используют сравнение с обменом – атомарную инструкцию, которая работает гораздо быстрее, чем синхронизация с помощью блокировок. Поэтому, если просто нужно изменять одну переменную с помощью нескольких потоков, лучше выбирать атомарные классы.</p>
</li>
<li>
<p>Сравнение с обменом  – атомарная инструкция, сравнивающая значение в памяти с одним из аргументов, и в случае успеха записывающая второй аргумент в память.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_особенности_и_проблемы">Особенности и проблемы</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_deprecated_метод_thread_stop">@Deprecated метод Thread.stop()</h3>
<div class="paragraph">
<p>Метод для прерывания потока объявили Deprecated, так как при вызове данного метода поток просто "убивался", что было очень непредсказуемо и влекло за собой проблемы. Разработчик не могу знать, когда поток будет остановлен.
Поэтому решили не убивать поток, а уведомлять планировщик о том, что потоку следует прерваться, когда и как - решит механизм внутри ОС.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-11-13 18:10:47 +0300
</div>
</div>
</body>
</html>